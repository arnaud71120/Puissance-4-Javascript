<div id="tableau" style="LEFT: 100px; WIDTH: 350px; POSITION: absolute; TOP: 100px; HEIGHT: 300px">
</div>
<script>
var jeton, joueur;
function initJoueur(){
  jeton = "jetonjaune.gif";
  joueur = 1;
}
initJoueur();
function swapJoueur(){
  if(joueur == 1){
    joueur = 2;
    jeton = "jetonrouge.gif";
  }else{
    joueur = 1;
    jeton = "jetonjaune.gif";
  }
}
function tableauInit(){
var tab = new Array();
  for(var i = 0 ; i < 7 ; i++){
    tab[i] = new Array();
      for (var y = 0 ; y < 6 ; y++){
        tab[i].push(false)
          }
  }
  return tab;
}
var tab = tableauInit();


function choixJoueurInit(){
var tabJoueur = new Array();
  for(var i = 0 ; i < 7 ; i++){
    tabJoueur[i] = new Array();
      for (var y = 0 ; y < 6 ; y++){
        tabJoueur[i].push(false)
          }
  }
  return tabJoueur;
}
var tabJoueur = choixJoueurInit();



function initGrille(){
  var tr1 = new Array();

    for(var i = 0 ; i < 6 ; i++){
      if (i == 0){
        tr = '<table cellspacing="0" cellpadding="0" width="350"><tbody><tr id="Ligne'+i+'">';
      }else{
       tr = '<tr id="Ligne'+i+'">';
     }
        for (var y = 0 ; y < 7 ; y++){
          tr += '<td id="Colonne'+y+'" onclick="addJetons('+y+');"><img src="images/case.gif"> </td>';
            }
            if(i == 6){
            tr += '</tr></tbody></table>';
          }
          else {
          tr +='</tr>';
          }
            tr1.push(tr);
    }
    document.getElementById("tableau").innerHTML = tr1;
}
initGrille();

function addJetons(value){
  for(var i = 5 ; i >= 0 ; i--){
    if (tab[value][i] == false){
      tab[value][i] = true;
      tabJoueur[value][i] = joueur;
      console.log(tabJoueur);
      var Ligne = 'Ligne' + i;
      var Parent = document.getElementById(Ligne);

      Parent.childNodes[value].innerHTML = '<img style="position: absolute; z-index: 1;" src="images/'+jeton+'"><img src="images/case.gif"> ';

      testVainqueur();
      swapJoueur();
      break;
    }
    if(i == 0 && tab[value][i] == true ){
      alert('Colonne pleine ! \n Veuillez choissir une autre colonne');
      break;
    }
      }
}

function testVainqueur(){
  var lastJoueur;
  var comptLigne=0;
  // test victoire sur ligne horizontal
  for (var i = 5 ; i >= 0 ; i--){
  for(var y = 6 ; y >= 0 ; y--){
    console.log(tabJoueur[y][i]);
    console.log('lastjoueur : ' + lastJoueur);
    if(tabJoueur[y][i] != false){
      if(lastJoueur == tabJoueur[y][i] ){
        comptLigne++;
      }else{
        comptLigne = 1;
      }
      lastJoueur = tabJoueur[y][i];
      if(comptLigne == 4){
        alert('Joueur ' + tabJoueur[y][i] + ' vainqueur' );
      }
    }
    }
  }

}



</script>
